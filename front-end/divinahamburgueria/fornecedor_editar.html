<html>

	<head>
		<meta charset="utf8"/>
		<script src="jquery/jquery3.6.js"></script>
		<link rel="stylesheet" href="bootstrap/dist/css/bootstrap.css" >
		<script src="bootstrap/dist/js/bootstrap.js"></script>
		<link rel="stylesheet" href="css/sistema.css" >
		<script src="js/sistema.js"></script>
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
	</head>

	<body>        

		<div class="setecincoporcento">

			<input type="hidden" id="idusuario" value="0">

			<br/>
			<a href="home.html">Home</a>		
			<br/>

			<br/>
			<h1 class="floatleft">Editar fornecedor</h1>
			<label class="floatright widthvintecincoporcento"><label class="asterisk"></label>
				Campos obrigat√≥rios
			</label>
			<br/>
			<div class="clearboth"></div>
			<br/>

		</div>

		<div id="base_FOR" class="setecincoporcento">				
		</div>

		<div id="base_ENV" class="setecincoporcento">				
		</div>

	</body>

	<script>

		var _loadForEndCompleted = false;
		var _loadForTelCompleted = false;	
		var _loadEnvCompleted = false;

		$(document).ready(function() {		
			if (CheckLogin() == false)
				return;
			$("#base_FOR").load("fornecedor_base_FOR.html", function (){
				$("#base_FOR_END").load("fornecedor_base_FOR_END.html", function (){					
					$("#adicionarEndereco").css('display', 'none');
					$("#retirarEndereco").css('display', 'none');										
					_loadForEndCompleted = true;
					StartLoadData();
				});	
				$("#base_FOR_TEL").load("fornecedor_base_FOR_TEL.html", function (){
					$("#adicionarTelefone").css('display', 'none');
					$("#retirarTelefone").css('display', 'none');
					_loadForTelCompleted = true;					
					StartLoadData();
				}); 							
			});			
			$("#base_ENV").load("fornecedor_base_ENV.html", function (){
				_loadEnvCompleted = true;
				StartLoadData();
			}); 
		});		

		function CheckLogin(){
			var idusuario = getLoggedUserId();
			if (idusuario == -1)
			{
				var page =  window.location.pathname.split("/").pop();
				window.location.href = window.location.href.replace(page,'login.html');	
				return false;					
			}								
			else
			{
				$('#idusuario').val(idusuario);
				return true;
			}
		}

		function StartLoadData(){
			if (!_loadForEndCompleted)
				return;
			if (!_loadForTelCompleted)
				return;
			if (!_loadEnvCompleted)
				return;
			LoadData();
		}

		function LoadData(){
			var query = queryObj();
			LoadFornecedor(query.id);			
		}

		function EnviarClick()
		{	

			if (ValidarFornecedor() == false)
				return;

			CrudTelefone();
			
		}

	</script>

</html>